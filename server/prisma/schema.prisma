// *** DO NOT EDIT. GENERATED BY PRISMIX. ***
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

generator docs {
  provider = "node node_modules/prisma-docs-generator"
  output   = "./docs"
}

generator class_validator {
  provider = "prisma-class-validator-generator"
}

model meta {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model User {
  id               Int             @id @default(autoincrement())
  profile_img      ProfileImage?   @relation(name: "ProfileImageToUser")
  username         String          @unique
  email            String          @unique
  hashed_pw        String
  post_allowed     Boolean         @default(false)
  identifier_token String?         @unique
  token            refresh_token[] @relation(name: "UserTorefresh_token")
  current_post     Post?           @relation(name: "PostToUser")
  followers        Follows[]       @relation(name: "follower")
  following        Follows[]       @relation(name: "following")
  created_at       DateTime        @default(now())
  updated_at       DateTime        @updatedAt
}

model Follows {
  follower    User @relation(name: "follower", fields: [followerId], references: [id])
  followerId  Int
  following   User @relation(name: "following", fields: [followingId], references: [id])
  followingId Int

  @@id([followerId, followingId])
}

model Post {
  author     User       @relation(name: "PostToUser", fields: [author_id], references: [id])
  author_id  Int        @unique
  post_id    Int        @id @default(autoincrement())
  title      String
  published  Boolean    @default(false)
  content    Content?   @relation(name: "content")
  reactions  Response[] @relation(name: "reactions")
  created_at DateTime   @default(now())
}

model ProfileImage {
  user     User   @relation(name: "ProfileImageToUser", fields: [user_id], references: [id])
  user_id  Int    @unique
  image_id Int    @id @default(autoincrement())
  alt      String
  data     Bytes
}

model refresh_token {
  user_id       Int    @unique
  user          User   @relation(name: "UserTorefresh_token", fields: [user_id], references: [id])
  refresh_token String @id
}

model Content {
  content_id   Int      @id @default(autoincrement())
  post         Post     @relation(name: "content", fields: [post_id], references: [post_id])
  post_id      Int      @unique
  content_path String
  alt          String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model Response {
  response_id   Int      @id @default(autoincrement())
  post          Post     @relation(name: "reactions", fields: [post_id], references: [post_id])
  post_id       Int
  response_path String
  alt           String
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}
